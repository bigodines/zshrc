# function git_current_branch {
  local gitdir
  gitdir="$GIT_DIR"
  if [[ -z "$gitdir" ]]; then
    gitdir=".git"
  fi

  if grep -q "ref" "$gitdir/HEAD" 2> /dev/null; then
    # OVER 9000
    cut -d '/' -f 3-9001 "$gitdir/HEAD"
  else
    echo "no branch"
  fi
# }
